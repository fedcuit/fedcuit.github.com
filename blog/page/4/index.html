
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Feng erdong's Blog</title>
  <meta name="author" content="Feng erdong">

  
  <meta name="description" content="Defining a View Defining a view is done by creating a special document in a CouchDB database. The only real specialness is the _id of the document, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://fedcuit.github.com/blog/page/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
   <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Feng erdong's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>


  

</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="fedcuit@gmail.com" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:fedcuit.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/10/27/definitive-guide-to-couchd-chapter21/">Notes of Definitive Guide to Couchdb - CHAPTER 21 View Cookbook for SQL Jockeys</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-27T21:41:00+08:00" pubdate data-updated="true">Oct 27<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/10/27/definitive-guide-to-couchd-chapter21/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Defining a View</h2>

<p>Defining a view is done by creating a special document in a CouchDB database. The only real specialness is the <code>_id</code> of the document, which starts with <code>_design/</code> —for example, <code>_design/application</code>. Other than that, it is just a regular CouchDB document.</p>

<h2>Querying a View</h2>

<p>/database/<em>design/application/</em>view/viewname</p>

<h2>Map Function</h2>

<p>A map function may call the built-in <code>emit(key, value)</code> function 0 to N  times per document, creating a row in the map result per invocation.</p>

<p>(a map function can return any counts of emit(key, value) call)</p>

<h2>Look up by key</h2>

<p>To look something up quickly, regardless of the storage mechanism, an index is needed.  An index is a data structure optimized for quick search and retrieval. CouchDB’s map result is stored in such an index, which happens to be a B+ tree.</p>

<p>(couchdb will generate a file with name xxxx.view to store the result of map/reduce function, it will copy the desired data from documents to the view file, not just reference it, so a view file may be very large)</p>

<p>Query: <code>/ladies/_design/ladies/_view/age?key=5</code></p>

<p>Result:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;total_rows&quot;</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;offset&quot;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;rows&quot;</span><span class="o">:</span><span class="p">[</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;fc2636bf50556346f1ce46b4bc01fe30&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="s2">&quot;Lena&quot;</span><span class="p">}</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>total_rows</code>: how many documents are there in this view result<br/>
<code>offset</code>: position/index of this document/the first document in this view result</p>

<h2>Aggregation Function</h2>

<ul>
<li>Reduce functions are similar to aggregate functions in SQL. They compute a value over multiple documents.</li>
<li>Reduce functions operate on the output of the map function (also called the map result  or intermediate result ).</li>
<li>This reduce function takes two arguments: a list of keys  and a list of values .</li>
<li>You’ll see one difference between the map and the reduce function. The map function uses emit() to create its result, whereas the reduce function returns a value.</li>
</ul>


<p>The result for a reduce view may looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;rows&quot;</span><span class="o">:</span><span class="p">[</span>
</span><span class='line'>    <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="mi">15</span><span class="p">}</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Get Unique Values</h2>

<p>The map result will look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;total_rows&quot;</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span><span class="s2">&quot;offset&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;rows&quot;</span><span class="o">:</span><span class="p">[</span>
</span><span class='line'>    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;3525ab874bc4965fa3cda7c549e92d30&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;bike&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;3525ab874bc4965fa3cda7c549e92d30&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;couchdb&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;53f82b1f0ff49a08ac79a9dff41d7860&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;couchdb&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;da5ea89448a4506925823f4d985aabbd&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;couchdb&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;3525ab874bc4965fa3cda7c549e92d30&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;drums&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;53f82b1f0ff49a08ac79a9dff41d7860&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;hypertext&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;da5ea89448a4506925823f4d985aabbd&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;music&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;da5ea89448a4506925823f4d985aabbd&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;mustache&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;53f82b1f0ff49a08ac79a9dff41d7860&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="o">:</span><span class="s2">&quot;philosophy&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">}</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Couchdb doesn’t have a keyword like <code>distinct</code>, but we can use <code>group</code> query parameter to group the result of reduce function, as we mentioned in last section, a reduce function only returns one value, but when we add <code>group=true</code> query parameter, multi values will be returned(each value is the reduce result of according group), grouped by the key in keys list, in this way, we can get the distinct keys(in this case, distinct tags)</li>
<li>Coucdb reduce result by default discard keys, so in the reduce result, key always be null, but if we add group=true in query, key will be used to grouping, so key will be reserved.</li>
<li><code>group=true</code> parameter can only be used on a view which has reduce function.</li>
<li>if a view has a reduce function, by default a query will return the result of reduce. we can explicit pass <code>reduce=false</code> to get map result instead of reduce result.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/10/27/javascript-collection-operation/">Javascript集合操作</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-27T18:12:00+08:00" pubdate data-updated="true">Oct 27<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/10/27/javascript-collection-operation/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>记录一些不常见的javascript集合操作.</p>

<h4>数组操作</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>常见的遍历数组的办法如下:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">index</span><span class="p">]);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">&gt;&gt;</span><span class="nx">a</span>
</span><span class='line'><span class="o">&gt;&gt;</span><span class="nx">b</span>
</span><span class='line'><span class="o">&gt;&gt;</span><span class="nx">c</span>
</span></code></pre></td></tr></table></div></figure>


<p>我们知道在javascript中，对象跟数组都是构建在类似hashtable的数据结构上的, 即它们都是基于键值对的，所以在这一点上，我们可以把数组看成跟对象是一样的，对于一个javascript object, 我们使用 <code>for (var prop in object)</code>这种语法来遍历一个对象中的内容，这种方式对数组一样适用:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">idx</span> <span class="k">in</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">idx</span><span class="p">]);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">&gt;&gt;</span><span class="nx">a</span>
</span><span class='line'><span class="o">&gt;&gt;</span><span class="nx">b</span>
</span><span class='line'><span class="o">&gt;&gt;</span><span class="nx">c</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/10/14/useful-git-commands/">实用git命令</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-14T18:02:00+08:00" pubdate data-updated="true">Oct 14<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/10/14/useful-git-commands/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><!---
Remote 
-->


<ul>
<li><p><code>git remote add &lt;remote-name&gt; &lt;remote-repo-url&gt;</code><br/>
Add another remote for current git branch and name it with given name <code>remote-name</code></p></li>
<li><p><code>git remote rename &lt;original-name&gt; &lt;new-name&gt;</code><br/>
Rename remote <code>original-name</code> to <code>new-name</code></p></li>
<li><p><code>git config branch.&lt;branch-name&gt;.remote &lt;remote-name&gt;</code><br/>
Set the default remote of branch <code>branch-name</code> to <code>remote-name</code>, this command will generate below segment in <code>.git/config</code>:</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>branch <span class="s2">&quot;&lt;branch-name&gt;&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="nv">remote</span> <span class="o">=</span> &lt;default-remote-name&gt;
</span><span class='line'>    <span class="nv">merge</span> <span class="o">=</span> refs/heads/master
</span></code></pre></td></tr></table></div></figure>


<p>File <code>.git/config</code> is used to store branches and remotes information for a git repository.</p>

<ul>
<li><code>git push &lt;remote-name&gt; [branch-name]</code><br/>
Push branch <code>branch-name</code> (If not specified, default is current branch) to remote <code>remote-name</code>.</li>
</ul>


<hr />

<!---
Branch
-->


<ul>
<li><code>git branch -D &lt;branch-name&gt;</code><br/>
Remove branch <branch-name></li>
<li><p><code>git branch -m &lt;orginal-name&gt; &lt;new-name&gt;</code><br/>
Rename branch <code>original-name</code> to given name <code>new-name</code>.</p></li>
<li><p><code>git checkout -b test origin/test</code><br/>
Git checkout remote branch</p></li>
</ul>


<hr />

<!---
Misc
-->


<ul>
<li><p><code>git reflog</code><br/>
  Reflog is a mechanism to record when the tip of branches are updated. This command is to manage the information recorded in it.</p>

<p>  应用场景:</p>

<ol>
<li>当前的working directory的git log如下图所示:
 <img src="/images/2012-10-14-useful-git-commands/before-reset.jpg" alt="git status" /></li>
<li>用户切换到commit 041f088去查看几天之前系统的某个功能，执行:
 <code>git reset --hard 041f088</code></li>
<li>当前的working directory的git log如下图所示:
 <img src="/images/2012-10-14-useful-git-commands/after-reset.jpg" alt="git status" /></li>
<li>如果想切换回最新代码, 却发现已经不知道之前的HEAD的commit hash, 此时就可以使用<code>git reflog</code>命令来查看当前分支上的所有操作记录, 从中找到最新代码对应的commit hash:
 <img src="/images/2012-10-14-useful-git-commands/reflog.jpg" alt="git status" />
 从<code>git reflog</code>显示的操作记录来看，我们是从commit 4a56876 执行reset操作的，所以之前的HEAD是 4a56876, 执行<code>git reset --hard 4a56876</code>就可以切换回之前的代码.</li>
</ol>
</li>
<li><code>git clean -f</code> <code>git clean -f -d</code><br/>
Remove untracked file from working directory. If <code>-d</code> used, will remove untracked directories in addition to untracked files.</li>
<li><code>git add -p</code><br/>
Interactively choose hunks of patch between the index and the work tree and add them to the index. This gives the user a chance to review the difference before adding modified contents to the index.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/30/xpath-vs-jquery-selector/">Xpath 与 jQuery Selector 的对应关系</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-30T17:00:00+08:00" pubdate data-updated="true">Sep 30<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/09/30/xpath-vs-jquery-selector/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><em>如果默认是从根找起的话, xpath需要以<code>//</code>开头</em></li>
<li><em>如果使用属性选择器, jQuery的属性值可以不使用引号，但是xpath中属性值必须用引号括起来</em></li>
</ul>


<h2>基本选择器</h2>

<ul>
<li><strong>id</strong>

<ul>
<li><code>$('#import-datasenders')</code></li>
<li><code>$x('//a[@id="import-datasenders"]')</code></li>
</ul>
</li>
<li><strong>class</strong>

<ul>
<li><code>$('a.register_data_sender')</code></li>
<li><code>$x('//a[@class="register_data_sender"]')</code></li>
</ul>
</li>
<li><strong>tag</strong>

<ul>
<li><code>$('a')</code></li>
<li><code>$x('//a')</code></li>
</ul>
</li>
<li><strong>*</strong>

<ul>
<li><code>$('#import-datasenders')</code></li>
<li><code>$x('//*[@id="import-datasenders"]')</code></li>
</ul>
</li>
<li><strong>选择器组</strong>

<ul>
<li><code>$('#import-datasenders, .register_data_sender')</code></li>
<li><code>$x('//*[@id="import-datasenders"]|//*[@class="register_data_sender"]')</code></li>
</ul>
</li>
</ul>


<h2>层次选择器</h2>

<ul>
<li><strong>后代元素</strong>

<ul>
<li><code>$('#my_subjects li')</code></li>
<li><code>$x('//*[@id="my_subjects"]//li')</code></li>
</ul>
</li>
<li><strong>直接子元素</strong>

<ul>
<li><code>$('.secondary_tab&gt;li')</code></li>
<li><code>$x('//*[@class="secondary_tab"]/li')</code></li>
</ul>
</li>
<li><p><strong>下一个兄弟元素</strong></p>

<ul>
<li><ol>
<li><code>$('input+image')</code></li>
<li><code>$('input').next()</code></li>
</ol>
</li>
<li><p><code>$x('//input/following-sibling::img')</code></p></li>
</ul>
</li>
<li><p><strong>上一个兄弟结点</strong></p>

<ul>
<li><code>$('input').prev()</code></li>
<li><code>$x('//input/preceding-sibling::*')</code></li>
</ul>


<p>xpath的这种写法与上面的jQuery写法非常的相似，但是功能并不完全相同. jQuery 会取当前元素的 <strong>紧跟着的</strong> 下一个/上一个 符合条件的兄弟结点, 而xpath会从当前元素的所有兄弟结点中查找符合条件的，但是不保证这个兄弟结点是当前结点的下一个/上一个结点.</p></li>
<li><p><strong>之后的所有兄弟结点</strong></p>

<ul>
<li><ol>
<li><code>$('input~image')</code></li>
<li><code>$('input').nextAll()</code></li>
</ol>
</li>
<li><code>$x('//input/following-sibling::img')</code></li>
</ul>
</li>
<li><p><strong>之前的所有兄弟结点</strong></p>

<ul>
<li><code>$('input').prevAll()</code></li>
<li><code>$x('//input/preceding-sibling::*')</code></li>
</ul>
</li>
<li><strong>所有的兄弟结点</strong>

<ul>
<li><code>$('input').siblings()</code></li>
<li><code>$x('//input/following-sibling::*|//input/preceding-sibling::*')</code></li>
</ul>
</li>
</ul>


<h2>过滤选择器</h2>

<h3>基本过滤选择器</h3>

<ul>
<li><p><strong>:first</strong></p>

<ul>
<li><code>$('ul&gt;li:first')</code></li>
<li><code>$x('//ul/li')[0]</code></li>
</ul>
</li>
<li><p><strong>:last</strong></p>

<ul>
<li><code>$('a:last')</code></li>
<li><code>$x('//a').pop(-1)</code></li>
</ul>


<p>jQuery伪类<code>:first</code>/<code>:last</code>返回的是结果集里面的 第一个/最后一个 元素，这已经与css selector无关了，完全是对数组的操作.</p></li>
<li><p><strong>:even</strong></p></li>
<li><p><strong>:odd</strong></p></li>
<li><p><strong>:eq(index)</strong></p></li>
<li><p><strong>:lt(index)</strong></p></li>
<li><p><strong>:gt(index)</strong></p>

<p>上面这些选择器都是jQuery特有的，他们完全是为了简化对结果集的数组操作.</p></li>
</ul>


<h3>内容过滤选择器</h3>

<ul>
<li><p><strong>:contains(text)</strong></p>

<ul>
<li><code>$('ul&gt;li:contains("Download")')</code></li>
<li><code>$x('//ul/li[contains(text(), "Download")]')</code></li>
</ul>
</li>
<li><p><strong>:empty</strong></p>

<ul>
<li><code>$('a:empty')</code></li>
<li>?</li>
</ul>
</li>
<li><p><strong>:parent</strong></p>

<ul>
<li><code>$('td:parent')</code></li>
<li><code>$x('//text()/parent::td | //*[not(text())]/parent::td')</code></li>
</ul>
</li>
<li><p><strong>:has(selector)</strong></p>

<ul>
<li><code>$('ul:has(a)')</code></li>
<li><code>$x('//a/ancestor::ul')</code></li>
</ul>
</li>
</ul>


<h3>可见性过滤器</h3>

<ul>
<li><strong>:hidden</strong>

<ul>
<li><code>$('input:hidden')</code></li>
<li>?</li>
</ul>
</li>
<li><strong>:visible</strong>

<ul>
<li><code>$('input:visible')</code></li>
<li>?</li>
</ul>
</li>
</ul>


<h3>属性过滤器</h3>

<ul>
<li><p><strong>[attribute]</strong></p>

<ul>
<li><code>$('div[style]')</code></li>
<li><code>$x('//div[@style]')</code></li>
</ul>
</li>
<li><p><strong>[attribute=value]</strong></p>

<ul>
<li><code>$('a[target=_blank]')</code></li>
<li><code>$x('//a[@target="_blank"]')</code></li>
</ul>
</li>
<li><p><strong>[attribute!=value]</strong></p>

<ul>
<li><code>$(':text[name!=email]')</code></li>
<li><ul>
<li><code>$x('//input[@type="text"][@name!="email"]')</code></li>
<li><code>$x('//input[@type="text" and @name!="email"]')</code></li>
</ul>
</li>
</ul>
</li>
<li><p>[attribute<sup>^=value]</sup></p>

<ul>
<li><code>$('input[name^=tel]')</code></li>
<li><code>$x('//input[starts-with(@name, "tel")]')</code></li>
</ul>
</li>
<li><p><strong>[attribute$=value]</strong></p>

<ul>
<li><code>$('input[name$=number]')</code></li>
<li><code>$x('//input[ends-with(@name, "num")]')</code></li>
</ul>


<p><code>ends-with</code>这个function并没有在 chrome console 跟 firebug console中测试通过，个人估计可能是因为xpath的版本问题.</p></li>
<li><p><strong>[attribute*=value]</strong></p>

<ul>
<li><code>$('input[name*=tel]')</code></li>
<li><code>$x('//input[contains(@name, "tel")]')</code></li>
</ul>
</li>
<li><p><strong>[att1][att2][att3]</strong></p>

<ul>
<li><code>$('input[type=text][name*=tel]')</code></li>
<li><code>$x('//input[@type="text"][contains(@name, "tel")]')</code></li>
</ul>
</li>
</ul>


<h3>子元素过滤器</h3>

<ul>
<li><strong>:nth-child</strong>

<ul>
<li><code>$('ul&gt;li:nth-child(1)')</code></li>
<li><code>$x('//ul/li[position()=1]')</code></li>
</ul>
</li>
</ul>


<p> xpath中的<code>position()</code>函数与jQuery的<code>:nth-child</code>伪选择器功能完全相同，而且都是base 0的.</p>

<ul>
<li><p><strong>:first-child</strong></p>

<ul>
<li><code>$('ul&gt;li:first-child')</code></li>
<li><code>$x('//ul/li[position()=1]')</code></li>
</ul>
</li>
<li><p><strong>:last-child</strong></p>

<ul>
<li><code>$('ul&gt;li:last-child')</code></li>
<li><code>$x('//ul/li[last()]')</code></li>
</ul>


<p>xpath中貌似没有<code>first()</code>函数</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/28/useful-shell-snippets/">实用Shell脚本片段</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-28T22:22:00+08:00" pubdate data-updated="true">Sep 28<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/09/28/useful-shell-snippets/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h5>Tips</h5>

<ul>
<li>赋值等号两端不能有空格</li>
<li>使用双引号而不是单引号</li>
<li>有时候需要明确使用${var}而不是$var</li>
</ul>


<h5>解释器选项</h5>

<ul>
<li><code>-e</code> Exit on error</li>
<li><code>-x</code> Expand command</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#! /bin/bash -ex</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h5>条件判断</h5>

<ul>
<li><code>[ -d ~/directory ] || mkdir ~/directory</code> 如果目录不存在，则创建此目录</li>
<li><code>[ -f ~/file ] || touch ~/file</code> 如果文件不存在，则创建此文件</li>
<li><code>[[ str =~ substr ]]</code>判断字符串中包含另一个字符串</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">function </span>verify_md5<span class="o">(){</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">=</span>~ <span class="nv">$2</span> <span class="o">]]</span>
</span><span class='line'>    <span class="k">then</span>
</span><span class='line'><span class="k">        </span><span class="nb">echo</span> <span class="s2">&quot;MD5 verification SUCCESS for $1.&quot;</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'><span class="k">        </span><span class="nb">echo</span> <span class="s2">&quot;MD5 verification FAILED for $1.&quot;</span>
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h5>文件操作</h5>

<p>想了解更多跟条件判断相关的bash命令，可以在<code>man bash</code>之后的查找对应的<em>CONDITIONAL EXPRESSIONS</em>部分.</p>

<ul>
<li><code>sed -i .bak 's/old/new/g' file</code> 首先生成file的备份文件file.bak, 然后将file文件中出现的所有old替换成new</li>
<li><code>echo "some content" &gt;&gt; ~/file</code> 向文件末尾添加内容</li>
<li><code>mv original_file_name{,.new_suffix}</code> 将original_file_name重命名为original_file_name.new_suffix</li>
</ul>


<hr />

<h5>函数操作</h5>

<ul>
<li>函数的定义与调用
风格上与Javascript相似，但是函数的定义与调用都不需要加括号，<strong>shell函数不使用括号</strong></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">function </span>main <span class="o">{</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;in main function&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>main
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>参数的传递
Shell函数没有参数列表这个概念, 在函数内部通过$n来接受第n个位置上的参数</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">function </span>greeting <span class="o">{</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Hello, $1, your id is $2&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>main <span class="o">{</span>
</span><span class='line'>    greeting <span class="s2">&quot;Feng Erdong&quot;</span> edfeng
</span><span class='line'>    greeting <span class="s2">&quot;Zhang xiaoming&quot;</span> xmzhang
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>main
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/24/date-time-in-python/">Python中的时间与日期</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-24T21:17:00+08:00" pubdate data-updated="true">Sep 24<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/09/24/date-time-in-python/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><code>dateutil.parser.parse</code> 将一个日期字符串转换为带时区信息的日期对象</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">dateutil.parser</span> <span class="kn">import</span> <span class="n">parse</span>
</span><span class='line'>
</span><span class='line'><span class="n">date</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s">&quot;08.10.2012&quot;</span> <span class="o">+</span> <span class="s">&quot; 00:00:00+0000&quot;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">date</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="n">date</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s">&quot;08.10.2012&quot;</span> <span class="o">+</span> <span class="s">&quot; 00:00:00+0000&quot;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">date</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>如果使用的python版本是2.x, 需要使用的python-dateutil的版本是1.x, python-dateutil 2.x版本需要python3.x支持</em></p>

<ul>
<li><code>datetime.timedelta</code> 在日期对象上添加偏移量</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">date</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="n">date</span> <span class="o">=</span> <span class="n">date</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">date</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="n">date</span> <span class="o">=</span> <span class="n">date</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">date</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>datetime.datetime.strptime</code> 将日期字符串转换为日期对象</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span class='line'>
</span><span class='line'><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s">&#39;2012.08.10&#39;</span><span class="p">,</span> <span class="s">&#39;%Y.%m.</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">date</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/11/notes-of-visual-git-reference/">Git Visual Reference Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-11T00:59:00+08:00" pubdate data-updated="true">Aug 11<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/08/11/notes-of-visual-git-reference/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This notes is written after reading <a href="http://marklodato.github.com/visual-git-guide/index-en.html">A Visual Git Reference</a></p>

<p><img src="http://marklodato.github.com/visual-git-guide/basic-usage.svg" alt="basic usage" /></p>

<ul>
<li><p><strong>git add</strong> <em>copy file from working directory to INDEX/stage</em></p></li>
<li><p><strong>git commit</strong> <em>save a snapshot of files in INDEX/stage to repo</em></p>

<ul>
<li><code>git commit -a</code><br/>
(first git add all filenames that existed in the latest commit, and then running git commit) when we only modified some file after last commit, then we can directly use <code>git commit -a</code> to skip the git add step.</li>
</ul>
</li>
<li><p><strong>git checkout</strong> <em>copy from commit history(local repo) to INDEX and working directory</em></p>

<ul>
<li><code>git checkout HEAD files</code> <br/>
copies files from the latest commit to both the stage and the working directory.</li>
<li><code>git checkout local_branch</code><br/>
if files are not passed, then copy all files from that commit point to both INDEX and working directory, and remove files not in that commit.</li>
<li><code>git checkout tag/remote_branch/commit-hash/relative-commit files</code> <br/>
copy files from specified commit to INDEX and working directory, if commit-hash is not passed, then copy files from INDEX to working directory.</li>
<li><code>git checkout tag/remote_branch/commit-hash/relative-commit</code>
<strong>IF</strong>

<ol>
<li>files are not passed</li>
<li>not checkout from a local branch  <br/>
<strong>THEN</strong> an anonymous branch is created call detached HEAD, afterward commit will be base on detached HEAD, if switch to another branch, all commit in detached HEAD will be lost, if commits want be stored, it&#8217;s better to use &#8216;git checkout -b new_branch_name&#8217; to create a branch rather than use the anonymous branch.</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>git reset</strong> <em>Move current branch to another position, and update INDEX</em></p>

<ul>
<li><code>git reset commit-hash</code>
move current branch(HEAD) to specified position, and update stage to match the commit-hash. if &#8211;hard is given, also update working directory. if &#8211;soft is given, neither is updated.</li>
<li><code>git reset</code>
no commit-hash given, default to HEAD, move to HEAD, means, branch is not moved, but stage is updated with last commit.</li>
<li><code>git reset [commit-hash] files</code>
move to specified commit-hash and update files in INDEX to match that commit. If commit-hash it not given, it defaults to HEAD.</li>
</ul>
</li>
<li><p><strong>git merge</strong></p>

<ul>
<li><code>git merge from_branch</code>
if other commit is ancestor of current commit, do nothing. if current commit is ancestor of other commit, results in a fast-forward merge. if current commit and other commit are not on the same line, then a real merge occur, git find out the common ancestor of the two commits, do merge with the three part, saving the result to both index and working directory, if no conflict, then do a new commit.</li>
</ul>
</li>
<li><p><strong>git cherry-pick</strong></p>

<ul>
<li><code>git cherry-pick commit-on-other-branch</code>
copy a commit, creating a new commit on the current branch with the same message and patch as another commit.</li>
</ul>
</li>
<li><p><strong>git rebase</strong> <em>replay commits of another branch onto the current branch, it just like a series of git cherry-pick call</em></p>

<ul>
<li><code>git rebase from_branch</code>
git merge will generate a new commit with two parents, but after git rebase, the last new commit only have one parent, and all old commits will be deleted.</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/04/python-http-lib/">常见的 Python Http Library使用</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-04T13:49:00+08:00" pubdate data-updated="true">Aug 4<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/08/04/python-http-lib/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>urllib2</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'>
</span><span class='line'><span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">&#39;http://www.google.com&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="c">#return content of requsted url in string format</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/04/easy-misused-jquery-api/">容易被误用的jQuery API</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-04T13:05:00+08:00" pubdate data-updated="true">Aug 4<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/08/04/easy-misused-jquery-api/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><code>closest()/parents()</code>
这两个api只查询祖先节点(有血缘关系的)</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/04/jquery-event-handling/">jQuery事件处理杂记</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-04T12:30:00+08:00" pubdate data-updated="true">Aug 4<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/08/04/jquery-event-handling/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>在<code>.on()</code>中判断事件源<br/>
  jQuery的事件处理函数中默认存在<code>event</code>这个对象， 在使用<code>on</code> 这种事件委托机制时，有时候我们想监听的特定元素的事件在收到之前就已经被其他外层的元素捕获到了，这个时候可以通过<code>event.target.nodeName</code>来拿到真正的事件源的结点名。注意，结点名是大写的.</li>
</ul>


<figure class='code'><figcaption><span>a simple demo may be not that reasonable</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#resultTable&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">//show edit form when click on tr</span>
</span><span class='line'><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span> <span class="nx">showUpdateEventForm</span><span class="p">)</span>
</span><span class='line'><span class="c1">//enable/disable toolbar button when click inner checkbox of tr</span>
</span><span class='line'><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">isCheckboxClicked</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">==</span> <span class="s1">&#39;INPUT&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isCheckboxClicked</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">$checkbox</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;:checkbox&#39;</span><span class="p">);</span>
</span><span class='line'>            <span class="nx">$checkbox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="o">!</span><span class="nx">$checkbox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">));</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="nx">$toolbarButtons</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
</span><span class='line'>    <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>建议在<code>.on()</code>的事件处理函数中显式接受event对象<br/>
  在chrome中，我们可以直接在<code>on()</code>指定的事件处理函数中使用<code>event</code>对象而不用显式传递这个<code>event</code>,但是在Firefox下必须显式传递这个event对象.</p></li>
<li><p>使用事件委托避免inline事件注册<br/>
   当使用requireJS, text来异步加载html片段到页面时，这个时间整个页面已经加载完毕，因为无法再给这段html片段中的元素添加事件监听，如果想在这段html片段中使用inline javascript来注册事件的话，又需要使用全局的javascript对象，这违背了使用requireJS来管理javascript的初衷。<br/>
   一种比较好的解决办法是，在这段html片段的父元素上使用事件委托机制来监听他的子元素上发生的事件，这样即使这段html片段是后来加入到页面的，也完全可以在$()中完成事件注册.</p></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://fedcuit.github.com" alt="Home"><img src="/images/Home.png"></a>
      <a href="http://fedcuit.github.com/archives/" alt="Archives"><img src="/images/Calendar.png"></a>
      <a href="mailto:fedcuit@gmail.com" alt="E-Mail"><img src="/images/Envelope.png"></a>
      <a href="http://fedcuit.github.com/atom.xml" alt="subscribe feed"><img src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>About Me</h1>
  <p>冯尔东@ThoughtWorks, 喜欢编程, 乐于分享, 很开心能跟一群天才在一起工作.</p>
  <p>新浪微博 
  <a href="http://weibo.com/fedcuit">@StevenF-nate</a>
  </p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/11/hg-cheat-sheet/">Hg cheat sheet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/19/testing-with-angular-directives/">Testing With Anaular &#8211; Directive</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/19/scope-in-angular/">Scope In Angular</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/11/traps-in-directive-return-false/">Traps in Angular Directive &#8211; Return False</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/10/traps-in-directive/">Traps in Angular Directive &#8211; Isolated Scope</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/fedcuit">@fedcuit</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'fedcuit',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Feng erdong -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'stevenfengsblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
